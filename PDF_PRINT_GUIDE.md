# PDF打印优化指南

## 打印样式改进

我们已经优化了发票的PDF打印功能，解决了以下问题：

### ✅ 修复的问题

1. **外边距问题**
   - 减少了PDF中的页面外边距
   - 从原来的 `40px 50px` 调整为 `20px 30px`
   - 确保内容区域最大化利用页面空间

2. **页脚分页问题**
   - 使用flexbox布局确保页脚始终在第一页底部
   - 添加了 `page-break-before: avoid` 防止页脚被推到第二页
   - 设置 `flex: 0 0 auto` 确保页脚不会被压缩

3. **单页显示优化**
   - 设置 `height: 100vh` 和 `max-height: 100vh` 确保内容适应单页
   - 调整各部分间距，压缩不必要的空白
   - 添加 `overflow: hidden` 防止内容溢出

### 🎯 技术实现

#### 页面布局
```css
.page {
  width: 100%;
  height: 100vh;
  max-height: 100vh;
  margin: 0;
  padding: 20px 30px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}
```

#### 内容区域
```css
.content-wrapper {
  flex: 1 1 auto;
  overflow: hidden;
}
```

#### 页脚定位
```css
.footer {
  flex: 0 0 auto;
  margin-top: auto;
  page-break-inside: avoid;
  page-break-before: avoid;
}
```

#### 间距优化
- 头部区域：`margin-bottom: 15px`
- 发票信息：`margin-bottom: 15px`
- 地址区域：`margin-bottom: 15px`
- 摘要区域：`margin-bottom: 20px`
- 项目表格：`margin-bottom: 15px`
- 总计区域：`margin-bottom: 15px`

## 使用说明

### 如何生成PDF

1. **输入邮箱地址**
   - 在页面顶部输入收票人邮箱
   - 确保邮箱格式正确

2. **生成发票**
   - 点击"生成新发票"按钮
   - 系统会生成包含随机数据的发票

3. **打印/保存PDF**
   - 点击"打印/保存PDF"按钮
   - 在打印对话框中：
     - 选择"保存为PDF"或选择打印机
     - 确认页面设置（建议使用A4纸张）
     - 点击保存或打印

### 最佳实践

1. **浏览器设置**
   - 推荐使用Chrome或Edge浏览器
   - 确保浏览器缩放比例为100%
   - 在打印设置中选择"更多设置"

2. **页面设置**
   - 纸张大小：A4
   - 方向：纵向
   - 边距：默认或最小
   - 背景图形：建议启用

3. **质量优化**
   - 在打印预览中检查布局
   - 确认页脚在第一页底部
   - 验证所有内容都清晰可见

## 故障排除

### 如果页脚仍然在第二页

1. 检查浏览器缩放比例是否为100%
2. 尝试在打印设置中选择"最小边距"
3. 确保使用的是A4纸张大小

### 如果内容被截断

1. 检查打印设置中的"背景图形"选项
2. 尝试使用不同的浏览器
3. 确认页面完全加载后再打印

### 如果外边距太大

1. 在打印设置中选择"自定义边距"
2. 将所有边距设置为最小值
3. 或者选择"无边距"选项（如果可用）

## 技术说明

这些改进确保了：
- PDF输出与浏览器显示保持一致
- 整个发票内容完整显示在单页中
- 页脚正确定位在页面底部
- 最大化利用页面空间
- 保持原有的专业外观和布局
